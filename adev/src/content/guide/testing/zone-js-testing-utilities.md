# Утилиты тестирования Zone.js

В этом руководстве описываются утилиты тестирования, используемые в основном для управления и контроля асинхронных задач
в модульных тестах. Эти утилиты по сути являются специфичными для Zone.js инструментами имитации часов (mock clock), что
особенно актуально для управления потоком асинхронных операций внутри тестов.

Информацию об общих утилитах тестирования Angular, включая `TestBed` и `ComponentFixture`, см. в
руководстве [API утилит тестирования](guide/testing/utility-apis).

Ниже приведено краткое описание функций, специфичных для Zone.js:

| Функция                | Подробности                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| :--------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `waitForAsync`         | Отслеживает асинхронные задачи и завершает тесты только тогда, когда в тестовой зоне больше не остается микро- или макрозадач. См. [waitForAsync](guide/testing/components-scenarios#waitForAsync).                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `fakeAsync`            | Запускает тело теста (`it`) внутри специальной _тестовой зоны fakeAsync_, обеспечивая стиль кодирования с линейным потоком управления. См. [fakeAsync](guide/testing/components-scenarios#fake-async).                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `tick`                 | Симулирует течение времени и завершение ожидающих асинхронных действий путем очистки очередей _таймеров_ и _микрозадач_ внутри _тестовой зоны fakeAsync_. Любознательному и увлеченному читателю может быть интересен этот подробный пост в блоге: ["_Tasks, microtasks, queues and schedules_"](https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules). Принимает необязательный аргумент, который переводит виртуальные часы вперед на указанное количество миллисекунд, выполняя асинхронные действия, запланированные в этот промежуток времени. См. [tick](guide/testing/components-scenarios#tick). |
| `discardPeriodicTasks` | Сбрасывает любые периодические задачи (например, `setInterval`), которые были созданы внутри зоны `fakeAsync`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `flushMicrotasks`      | Когда тест `fakeAsync()` завершается с ожидающими _микрозадачами_, такими как неразрешенные промисы (promises), тест завершается с ошибкой и понятным сообщением. <br /> В общем случае тест должен дождаться завершения микрозадач. Если ожидаются незавершенные микрозадачи, вызовите `flushMicrotasks`, чтобы очистить очередь _микрозадач_ и избежать ошибки.                                                                                                                                                                                                                                                        |
