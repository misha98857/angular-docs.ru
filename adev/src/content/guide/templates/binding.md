# Привязка динамического текста, свойств и атрибутов

В Angular **привязка** (binding) создает динамическую связь между шаблоном компонента и его данными. Эта связь
гарантирует, что изменения данных компонента автоматически обновляют отображаемый шаблон.

## Рендеринг динамического текста с помощью интерполяции

Вы можете привязывать динамический текст в шаблонах с помощью двойных фигурных скобок. Это сообщает Angular, что он
отвечает за выражение внутри и должен гарантировать его корректное обновление. Это называется **интерполяцией текста**.

```angular-ts
@Component({
  template: `
    <p>Your color preference is {{ theme }}.</p>
  `,
  ...
})
export class AppComponent {
  theme = 'dark';
}
```

В этом примере, когда фрагмент рендерится на странице, Angular заменяет `{{ theme }}` на `dark`.

```angular-html
<!-- Результат рендеринга -->
<p>Your color preference is dark.</p>
```

Привязки, значения которых изменяются со временем, должны считывать данные из [сигналов](/guide/signals). Angular
отслеживает сигналы, считанные в шаблоне, и обновляет отображаемую страницу при изменении значений этих сигналов.

```angular-ts
@Component({
  template: `
    <!-- Не обязательно обновляется при изменении welcomeMessage. -->
    <p>{{ welcomeMessage }}</p>

    <p>Your color preference is {{ theme() }}.</p> <!-- Всегда обновляется при изменении значения сигнала theme. -->
  `
  ...
})
export class AppComponent {
  welcomeMessage = "Welcome, enjoy this app that we built for you";
  theme = signal('dark');
}
```

Для получения более подробной информации см. [руководство по Сигналам](/guide/signals).

Продолжая пример с темой: если пользователь нажимает на кнопку, которая обновляет сигнал `theme` на `'light'` после
загрузки страницы, страница обновляется соответствующим образом:

```angular-html
<!-- Результат рендеринга -->
<p>Your color preference is light.</p>
```

Вы можете использовать интерполяцию текста везде, где обычно пишете текст в HTML.

Все значения выражений преобразуются в строку. Объекты и массивы преобразуются с использованием их метода `toString`.

## Привязка динамических свойств и атрибутов

Angular поддерживает привязку динамических значений к свойствам объектов и HTML-атрибутам с помощью квадратных скобок.

Вы можете выполнять привязку к свойствам DOM-экземпляра HTML-элемента, экземпляра [компонента](guide/components) или
экземпляра [директивы](guide/directives).

### Свойства нативных элементов

Каждый HTML-элемент имеет соответствующее DOM-представление. Например, каждому HTML-элементу `<button>` соответствует
экземпляр `HTMLButtonElement` в DOM. В Angular вы используете привязку свойств для установки значений непосредственно в
DOM-представление элемента.

```angular-html
<!-- Привязка свойства disabled к DOM-объекту элемента button -->
<button [disabled]="isFormValid()">Save</button>
```

В этом примере каждый раз, когда меняется `isFormValid`, Angular автоматически устанавливает свойство `disabled`
экземпляра `HTMLButtonElement`.

### Свойства компонентов и директив

Когда элемент является компонентом Angular, вы можете использовать привязку свойств для установки входных свойств (
Input) компонента, используя тот же синтаксис квадратных скобок.

```angular-html
<!-- Привязка свойства value к экземпляру компонента MyListbox. -->
<my-listbox [value]="mySelection()" />
```

В этом примере каждый раз, когда меняется `mySelection`, Angular автоматически устанавливает свойство `value` экземпляра
`MyListbox`.

Вы также можете выполнять привязку к свойствам директив.

```angular-html
<!-- Привязка к свойству ngSrc директивы NgOptimizedImage -->
<img [ngSrc]="profilePhotoUrl()" alt="The current user's profile photo">
```

### Атрибуты

Когда вам нужно установить HTML-атрибуты, не имеющие соответствующих DOM-свойств (например, SVG-атрибуты), вы можете
привязывать атрибуты к элементам в шаблоне с помощью префикса `attr.`.

```angular-html
<!-- Привязка атрибута role элемента <ul> к свойству listRole компонента. -->
<ul [attr.role]="listRole()">
```

В этом примере каждый раз, когда меняется `listRole`, Angular автоматически устанавливает атрибут `role` элемента
`<ul>`, вызывая `setAttribute`.

Если значение привязки атрибута равно `null`, Angular удаляет атрибут, вызывая `removeAttribute`.

### Интерполяция текста в свойствах и атрибутах

Вы также можете использовать синтаксис интерполяции текста в свойствах и атрибутах, используя двойные фигурные скобки
вместо квадратных скобок вокруг имени свойства или атрибута. При использовании этого синтаксиса Angular рассматривает
присваивание как привязку свойства.

```angular-html
<!-- Привязывает значение к свойству alt DOM-объекта элемента image. -->
<img src="profile-photo.jpg" alt="Profile photo of {{ firstName() }}" >
```

## Привязка CSS-классов и свойств стилей

Angular поддерживает дополнительные возможности для привязки CSS-классов и свойств стилей CSS к элементам.

### CSS-классы

Вы можете создать привязку CSS-класса для условного добавления или удаления CSS-класса на элементе в зависимости от
того, является ли привязанное
значение [истинным или ложным (truthy или falsy)](https://developer.mozilla.org/en-US/docs/Glossary/Truthy).

```angular-html
<!-- Когда isExpanded истинно (truthy), добавляется CSS-класс expanded. -->
<ul [class.expanded]="isExpanded()">
```

Вы также можете привязаться непосредственно к свойству `class`. Angular принимает три типа значений:

| Описание значения `class`                                                                                                                                          | Тип TypeScript        |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------- |
| Строка, содержащая один или несколько CSS-классов, разделенных пробелами                                                                                           | `string`              |
| Массив строк CSS-классов                                                                                                                                           | `string[]`            |
| Объект, где каждое имя свойства — это имя CSS-класса, а соответствующее значение определяет, применяется ли этот класс к элементу (на основе истинности/ложности). | `Record<string, any>` |

```angular-ts
@Component({
  template: `
    <ul [class]="listClasses"> ... </ul>
    <section [class]="sectionClasses()"> ... </section>
    <button [class]="buttonClasses()"> ... </button>
  `,
  ...
})
export class UserProfile {
  listClasses = 'full-width outlined';
  sectionClasses = signal(['expandable', 'elevated']);
  buttonClasses = signal({
    highlighted: true,
    embiggened: false,
  });
}
```

Приведенный выше пример рендерит следующий DOM:

```angular-html
<ul class="full-width outlined"> ... </ul>
<section class="expandable elevated"> ... </section>
<button class="highlighted"> ... </button>
```

Angular игнорирует любые строковые значения, которые не являются допустимыми именами CSS-классов.

При использовании статических CSS-классов, прямой привязке `class` и привязке конкретных классов Angular интеллектуально
объединяет все классы в итоговом результате.

```angular-ts
@Component({
  template: `<ul class="list" [class]="listType()" [class.expanded]="isExpanded()"> ...`,
  ...
})
export class Listbox {
  listType = signal('box');
  isExpanded = signal(true);
}
```

В примере выше Angular рендерит элемент `ul` со всеми тремя CSS-классами.

```angular-html
<ul class="list box expanded">
```

Angular не гарантирует определенный порядок CSS-классов на отрендеренных элементах.

При привязке `class` к массиву или объекту Angular сравнивает предыдущее значение с текущим с помощью оператора строгого
равенства (`===`). Вы должны создать новый экземпляр объекта или массива при изменении этих значений, чтобы Angular
применил обновления.

Если элемент имеет несколько привязок для одного и того же CSS-класса, Angular разрешает конфликты, следуя своему
порядку приоритета стилей.

ПРИМЕЧАНИЕ: Привязки классов не поддерживают имена классов, разделенные пробелами, в одном ключе. Они также не
поддерживают мутации объектов, так как ссылка на привязку остается прежней. Если вам нужно одно или другое, используйте
директиву [ngClass](/api/common/NgClass).

### Свойства стилей CSS

Вы также можете привязываться к свойствам стилей CSS непосредственно на элементе.

```angular-html
<!-- Установка CSS-свойства display на основе свойства isExpanded. -->
<section [style.display]="isExpanded() ? 'block' : 'none'">
```

Вы можете дополнительно указать единицы измерения для CSS-свойств, которые их поддерживают.

```angular-html
<!-- Установка CSS-свойства height в пикселях на основе свойства sectionHeightInPixels. -->
<section [style.height.px]="sectionHeightInPixels()">
```

Вы также можете установить несколько значений стилей в одной привязке. Angular принимает следующие типы значений:

| Описание значения `style`                                                                                                    | Тип TypeScript        |
| ---------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| Строка, содержащая ноль или более CSS-деклараций, например `"display: flex; margin: 8px"`.                                   | `string`              |
| Объект, где каждое имя свойства — это имя CSS-свойства, а каждое соответствующее значение — это значение этого CSS-свойства. | `Record<string, any>` |

```angular-ts
@Component({
  template: `
    <ul [style]="listStyles()"> ... </ul>
    <section [style]="sectionStyles()"> ... </section>
  `,
  ...
})
export class UserProfile {
  listStyles = signal('display: flex; padding: 8px');
  sectionStyles = signal({
    border: '1px solid black',
    'font-weight': 'bold',
  });
}
```

Приведенный выше пример рендерит следующий DOM:

```angular-html
<ul style="display: flex; padding: 8px"> ... </ul>
<section style="border: 1px solid black; font-weight: bold"> ... </section>
```

При привязке `style` к объекту Angular сравнивает предыдущее значение с текущим с помощью оператора строгого равенства (
`===`). Вы должны создать новый экземпляр объекта при изменении этих значений, чтобы Angular применил обновления.

Если элемент имеет несколько привязок для одного и того же свойства стиля, Angular разрешает конфликты, следуя своему
порядку приоритета стилей.

## ARIA-атрибуты

Angular поддерживает привязку строковых значений к ARIA-атрибутам.

```angular-html
<button type="button" [aria-label]="actionLabel()">
  {{ actionLabel() }}
</button>
```

Angular записывает строковое значение в атрибут `aria-label` элемента и удаляет его, когда привязанное значение равно
`null`.

Некоторые функции ARIA предоставляют DOM-свойства или входные данные директив, которые принимают структурированные
значения (например, ссылки на элементы). В таких случаях используйте стандартные привязки свойств. Примеры и
дополнительные рекомендации см. в [руководстве по доступности](best-practices/a11y#aria-attributes-and-properties).
