# Синтаксис выражений

Выражения Angular основаны на JavaScript, но имеют ряд ключевых отличий. В этом руководстве рассматриваются сходства и
различия между выражениями Angular и стандартным JavaScript.

## Литералы значений

Angular поддерживает подмножество [литеральных значений](https://developer.mozilla.org/en-US/docs/Glossary/Literal) из
JavaScript.

### Поддерживаемые литералы значений

| Тип литерала         | Примеры значений                |
| -------------------- | ------------------------------- |
| Строка               | `'Hello'`, `"World"`            |
| Логическое (Boolean) | `true`, `false`                 |
| Число                | `123`, `3.14`                   |
| Объект               | `{name: 'Alice'}`               |
| Массив               | `['Onion', 'Cheese', 'Garlic']` |
| null                 | `null`                          |
| Шаблонная строка     | `` `Hello ${name}` ``           |
| RegExp               | `/\d+/`                         |

### Неподдерживаемые литералы значений

| Тип литерала | Примеры значений |
| ------------ | ---------------- |
| BigInt       | `1n`             |

## Глобальные переменные

Выражения Angular поддерживают
следующие [глобальные объекты](https://developer.mozilla.org/en-US/docs/Glossary/Global_object):

- [undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
- [$any](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#any)

Другие глобальные переменные JavaScript не поддерживаются. К распространенным глобальным переменным JavaScript относятся
`Number`, `Boolean`, `NaN`, `Infinity`, `parseInt` и другие.

## Локальные переменные

Angular автоматически предоставляет специальные локальные переменные для использования в выражениях в определенных
контекстах. Эти специальные переменные всегда начинаются со знака доллара (`$`).

Например, блоки `@for` создают несколько локальных переменных, соответствующих информации о цикле, таких как `$index`.

## Какие операторы поддерживаются?

### Поддерживаемые операторы

Angular поддерживает следующие операторы из стандартного JavaScript.

| Оператор                             | Пример(ы)                                      |
| ------------------------------------ | ---------------------------------------------- |
| Сложение / Конкатенация              | `1 + 2`                                        |
| Вычитание                            | `52 - 3`                                       |
| Умножение                            | `41 * 6`                                       |
| Деление                              | `20 / 4`                                       |
| Остаток от деления (Modulo)          | `17 % 5`                                       |
| Возведение в степень                 | `10 ** 3`                                      |
| Скобки (Группировка)                 | `9 * (8 + 4)`                                  |
| Условный (Тернарный)                 | `a > b ? true : false`                         |
| И (Логическое)                       | `&&`                                           |
| ИЛИ (Логическое)                     | `\|\|`                                         |
| НЕ (Логическое)                      | `!`                                            |
| Оператор объединения с null          | `possiblyNullValue ?? 'default'`               |
| Операторы сравнения                  | `<`, `<=`, `>`, `>=`, `==`, `===`, `!==`, `!=` |
| Унарное отрицание                    | `-x`                                           |
| Унарный плюс                         | `+y`                                           |
| Доступ к свойству                    | `person['name']`                               |
| Присваивание                         | `a = b`                                        |
| Присваивание со сложением            | `a += b`                                       |
| Присваивание с вычитанием            | `a -= b`                                       |
| Присваивание с умножением            | `a *= b`                                       |
| Присваивание с делением              | `a /= b`                                       |
| Присваивание с остатком от деления   | `a %= b`                                       |
| Присваивание с возведением в степень | `a **= b`                                      |
| Логическое И с присваиванием         | `a &&= b`                                      |
| Логическое ИЛИ с присваиванием       | `a \|\|= b`                                    |
| Объединение с null с присваиванием   | `a ??= b`                                      |

Выражения Angular также поддерживают следующие нестандартные операторы:

| Оператор                                   | Пример(ы)                      |
| ------------------------------------------ | ------------------------------ |
| [Pipe](/guide/templates/pipes)             | `{{ total \| currency }}`      |
| Опциональная цепочка (Optional chaining)\* | `someObj.someProp?.nestedProp` |
| Non-null assertion (TypeScript)            | `someObj!.someProp`            |

ПРИМЕЧАНИЕ: Опциональная цепочка ведет себя иначе, чем в стандартной версии JavaScript: если левая часть оператора
опциональной цепочки Angular равна `null` или `undefined`, он возвращает `null` вместо `undefined`.

### Неподдерживаемые операторы

| Оператор                  | Пример(ы)                           |
| ------------------------- | ----------------------------------- |
| Все побитовые операторы   | `&`, `&=`, `~`, `\|=`, `^=`, и т.д. |
| Деструктуризация объектов | `const { name } = person`           |
| Деструктуризация массивов | `const [firstItem] = items`         |
| Оператор "запятая"        | `x = (x++, x)`                      |
| instanceof                | `car instanceof Automobile`         |
| new                       | `new Car()`                         |

## Лексический контекст выражений

Выражения Angular вычисляются в контексте класса компонента, а также любых
соответствующих [переменных шаблона](/guide/templates/variables), локальных и глобальных переменных.

При обращении к членам класса компонента `this` всегда подразумевается. Однако, если шаблон
объявляет [переменную шаблона](guide/templates/variables) с тем же именем, что и член класса, переменная перекрывает (
shadows) этот член. Вы можете однозначно сослаться на такой член класса, явно используя `this.`. Это может быть полезно
при создании объявления `@let`, которое перекрывает член класса, например, для целей сужения типов сигналов (signal
narrowing).

## Объявления

Как правило, объявления не поддерживаются в выражениях Angular. Это включает, но не ограничивается:

| Объявления         | Пример(ы)                                   |
| ------------------ | ------------------------------------------- |
| Переменные         | `let label = 'abc'`, `const item = 'apple'` |
| Функции            | `function myCustomFunction() { }`           |
| Стрелочные функции | `() => { }`                                 |
| Классы             | `class Rectangle { }`                       |

# Инструкции прослушивателей событий

Обработчики событий являются **инструкциями** (statements), а не выражениями. Хотя они поддерживают тот же синтаксис,
что и выражения Angular, есть два ключевых отличия:

1. Инструкции **поддерживают** операторы присваивания (но не деструктурирующее присваивание).
1. Инструкции **не поддерживают** Pipe'ы.
