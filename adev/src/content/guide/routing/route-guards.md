# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º —Å –ø–æ–º–æ—â—å—é Guard

–í–ê–ñ–ù–û: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ Guard-—ã (–∑–∞—â–∏—Ç–Ω–∏–∫–∏) –∫–∞–∫ –Ω–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞. –í–µ—Å—å
JavaScript, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π –≤ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í—Å–µ–≥–¥–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –ª—é–±—ã–º –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∞–º.

Guard-—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –∏–ª–∏
–ø–æ–∫–∏–Ω—É—Ç—å –µ–≥–æ. –û–Ω–∏ –ø–æ–¥–æ–±–Ω—ã –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ-–ø—Ä–æ–ø—É—Å–∫–Ω—ã–º –ø—É–Ω–∫—Ç–∞–º, —É–ø—Ä–∞–≤–ª—è—é—â–∏–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ
–ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Guard-–æ–≤ –≤–∫–ª—é—á–∞—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞.

## –°–æ–∑–¥–∞–Ω–∏–µ Guard-–∞

–í—ã –º–æ–∂–µ—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Guard —Å –ø–æ–º–æ—â—å—é Angular CLI:

```bash
ng generate guard CUSTOM_NAME
```

–í–∞–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –≤—ã–±—Ä–∞—Ç—å, –∫–∞–∫–æ–π [—Ç–∏–ø Guard-–∞](#types-of-route-guards) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –ø–æ—Å–ª–µ —á–µ–≥–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª `CUSTOM_NAME-guard.ts`.

–°–û–í–ï–¢: –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å Guard –≤—Ä—É—á–Ω—É—é, –¥–æ–±–∞–≤–∏–≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π TypeScript-—Ñ–∞–π–ª –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–±—ã—á–Ω–æ
–¥–æ–±–∞–≤–ª—è—é—Ç —Å—É—Ñ—Ñ–∏–∫—Å `-guard.ts` –∫ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞, —á—Ç–æ–±—ã –æ—Ç–ª–∏—á–∞—Ç—å –µ–≥–æ –æ—Ç –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤.

## –¢–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π Guard-–∞ {#route-guard-return-types}

–í—Å–µ Guard-—ã –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –≠—Ç–æ –¥–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π:

| –¢–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π       | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                 |
| -------------------------------- | ---------------------------------------------------------------------------------------- |
| `boolean`                        | `true` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é, `false` –±–ª–æ–∫–∏—Ä—É–µ—Ç –µ—ë (—Å–º. –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –¥–ª—è Guard-–∞ `CanMatch`) |
| `UrlTree` –∏–ª–∏ `RedirectCommand`  | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π –º–∞—Ä—à—Ä—É—Ç –≤–º–µ—Å—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏                                       |
| `Promise<T>` –∏–ª–∏ `Observable<T>` | –†–æ—É—Ç–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–≤–æ–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –∑–∞—Ç–µ–º –æ—Ç–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è                        |

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: `CanMatch` –≤–µ–¥–µ—Ç —Å–µ–±—è –∏–Ω–∞—á–µ ‚Äî –µ—Å–ª–∏ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `false`, Angular –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –¥—Ä—É–≥–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
–≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

## –¢–∏–ø—ã Guard-–æ–≤ {#types-of-route-guards}

Angular –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ç—ã—Ä–µ —Ç–∏–ø–∞ Guard-–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É–∂–∏—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π:

<docs-pill-row>
  <docs-pill href="#canactivate" title="CanActivate"/>
  <docs-pill href="#canactivatechild" title="CanActivateChild"/>
  <docs-pill href="#candeactivate" title="CanDeactivate"/>
  <docs-pill href="#canmatch" title="CanMatch"/>
</docs-pill-row>

### CanActivate

Guard `CanActivate` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ä—à—Ä—É—Ç—É. –ß–∞—â–µ –≤—Å–µ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è
–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

–û–Ω –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- `route: ActivatedRouteSnapshot` - –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º–æ–º –º–∞—Ä—à—Ä—É—Ç–µ
- `state: RouterStateSnapshot` - –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞

–û–Ω –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å [—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π Guard-–æ–≤](#route-guard-return-types).

```ts
export const authGuard: CanActivateFn = (route: ActivatedRouteSnapshot, state: RouterStateSnapshot) => {
  const authService = inject(AuthService);
  return authService.isAuthenticated();
};
```

–°–æ–≤–µ—Ç: –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–µ—Ä–Ω–∏—Ç–µ [`URLTree`](api/router/UrlTree) –∏–ª–∏ [
`RedirectCommand`](api/router/RedirectCommand). **–ù–µ** –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ `false` —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º –≤—ã–∑–æ–≤–æ–º `navigate`.

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API –¥–ª—è CanActivateFn](api/router/CanActivateFn).

### CanActivateChild {#canactivatechild}

Guard `CanActivateChild` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–æ—á–µ—Ä–Ω–∏–º –º–∞—Ä—à—Ä—É—Ç–∞–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ
—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞—â–∏—Ç–∏—Ç—å —Ü–µ–ª—É—é —Å–µ–∫—Ü–∏—é –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏,
`canActivateChild` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–ª—è _–≤—Å–µ—Ö_ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –µ—â–µ –æ–¥–∏–Ω
–≤–ª–æ–∂–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, `canActivateChild` –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–û–Ω –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- `childRoute: ActivatedRouteSnapshot` - –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ "–±—É–¥—É—â–µ–º" —Å–Ω–∏–º–∫–µ (—Ç.–µ. —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∫ –∫–æ—Ç–æ—Ä–æ–º—É —Ä–æ—É—Ç–µ—Ä
  –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–π—Ç–∏) –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º–æ–≥–æ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
- `state: RouterStateSnapshot` - –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞

–û–Ω –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å [—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π Guard-–æ–≤](#route-guard-return-types).

```ts
export const adminChildGuard: CanActivateChildFn = (childRoute: ActivatedRouteSnapshot, state: RouterStateSnapshot) => {
  const authService = inject(AuthService);
  return authService.hasRole('admin');
};
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å
—Å [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API –¥–ª—è CanActivateChildFn](api/router/CanActivateChildFn).

### CanDeactivate {#candeactivate}

Guard `CanDeactivate` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–Ω—É—Ç—å –º–∞—Ä—à—Ä—É—Ç. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ
—É—Ö–æ–¥–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞–º–∏.

–û–Ω –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- `component: T` - –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `currentRoute: ActivatedRouteSnapshot` - –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –º–∞—Ä—à—Ä—É—Ç–µ
- `currentState: RouterStateSnapshot` - –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
- `nextState: RouterStateSnapshot` - –°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–æ–¥

–û–Ω –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å [—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π Guard-–æ–≤](#route-guard-return-types).

```ts
export const unsavedChangesGuard: CanDeactivateFn<FormComponent> = (component: FormComponent, currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState: RouterStateSnapshot) => {
  return component.hasUnsavedChanges()
    ? confirm('–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–π—Ç–∏?')
    : true;
};
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å
—Å [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API –¥–ª—è CanDeactivateFn](api/router/CanDeactivateFn).

### CanMatch {#canmatch}

Guard `CanMatch` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ –º–∞—Ä—à—Ä—É—Ç –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—É—Ç–µ–π (path matching). –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç
–¥—Ä—É–≥–∏—Ö Guard-–æ–≤, –æ—Ç–∫–∞–∑ –∑–¥–µ—Å—å –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏, –∞ –Ω–µ –∫ –ø–æ–ª–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è feature flags (—Ñ–ª–∞–≥–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π), A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —É—Å–ª–æ–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤.

–û–Ω –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- `route: Route` - –û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
- `segments: UrlSegment[]` - –°–µ–≥–º–µ–Ω—Ç—ã URL, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏

–û–Ω –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å [—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π Guard-–æ–≤](#route-guard-return-types), –Ω–æ –µ—Å–ª–∏ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `false`,
Angular –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –¥—Ä—É–≥–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

```ts
export const featureToggleGuard: CanMatchFn = (route: Route, segments: UrlSegment[]) => {
  const featureService = inject(FeatureService);
  return featureService.isFeatureEnabled('newDashboard');
};
```

–≠—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø—É—Ç–∏.

```ts
// üìÑ routes.ts
const routes: Routes = [
  {
    path: 'dashboard',
    component: AdminDashboard,
    canMatch: [adminGuard]
  },
  {
    path: 'dashboard',
    component: UserDashboard,
    canMatch: [userGuard]
  }
]
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–µ—â–∞–µ—Ç `/dashboard`, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø–µ—Ä–≤—ã–π –º–∞—Ä—à—Ä—É—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É
Guard-—É.

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API –¥–ª—è CanMatchFn](api/router/CanMatchFn).

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Guard-–æ–≤ –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è Guard-–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Ö –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤.

Guard-—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ Guard-–æ–≤ –∫ –æ–¥–Ω–æ–º—É
–º–∞—Ä—à—Ä—É—Ç—É. –û–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º —É–∫–∞–∑–∞–Ω—ã –≤ –º–∞—Å—Å–∏–≤–µ.

```ts
import { Routes } from '@angular/router';
import { authGuard } from './guards/auth.guard';
import { adminGuard } from './guards/admin.guard';
import { canDeactivateGuard } from './guards/can-deactivate.guard';
import { featureToggleGuard } from './guards/feature-toggle.guard';

const routes: Routes = [
  // –ë–∞–∑–æ–≤—ã–π CanActivate - —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  {
    path: 'dashboard',
    component: DashboardComponent,
    canActivate: [authGuard]
  },

  // –ù–µ—Å–∫–æ–ª—å–∫–æ Guard-–æ–≤ CanActivate - —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ò —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  {
    path: 'admin',
    component: AdminComponent,
    canActivate: [authGuard, adminGuard]
  },

  // CanActivate + CanDeactivate - –∑–∞—â–∏—â–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
  {
    path: 'profile',
    component: ProfileComponent,
    canActivate: [authGuard],
    canDeactivate: [canDeactivateGuard]
  },

  // CanActivateChild - –∑–∞—â–∏—â–∞–µ—Ç –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
  {
    path: 'users', // /user - –ù–ï –∑–∞—â–∏—â–µ–Ω
    canActivateChild: [authGuard],
    children: [
      // /users/list - –ó–ê–©–ò–©–ï–ù
      { path: 'list', component: UserListComponent },
      // /users/detail/:id - –ó–ê–©–ò–©–ï–ù
      { path: 'detail/:id', component: UserDetailComponent }
    ]
  },

  // CanMatch - —É—Å–ª–æ–≤–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ feature flag
  {
    path: 'beta-feature',
    component: BetaFeatureComponent,
    canMatch: [featureToggleGuard]
  },

  // –†–µ–∑–µ—Ä–≤–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç, –µ—Å–ª–∏ –±–µ—Ç–∞-—Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞
  {
    path: 'beta-feature',
    component: ComingSoonComponent
  }
];
```
