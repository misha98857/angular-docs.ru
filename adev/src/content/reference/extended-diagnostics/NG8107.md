# Опциональная цепочка для типа, не допускающего null

Эта диагностика срабатывает, когда левый операнд оператора опциональной цепочки (`?.`) в шаблонах Angular не содержит
`null` или `undefined` в своем типе.

```typescript
import { Component } from '@angular/core';

@Component({
  // Безопасный вывод имени пользователя, даже если `user` равен `null` или `undefined`.
  template: `<div>User name: {{ user?.name }}</div>`,
})
class MyComponent {
  // `user` объявлен как объект, который _не может_ быть `null` или `undefined`.
  user: { name: string } = { name: 'Angelino' };
}
```

## В чем проблема?

Использование оператора опциональной цепочки со значением, не допускающим `null`, не имеет смысла и указывает на
несоответствие между допустимым типом значения и его использованием в шаблоне.
Разработчик может обоснованно предположить, что результат оператора опциональной цепочки может быть `null` или
`undefined`, но на самом деле он никогда не примет ни одно из этих значений.
Это может привести к путанице относительно ожидаемого результата работы программы.

## Что следует сделать?

Синхронизируйте шаблон и объявленный тип.
Проверьте тип входных данных и убедитесь, действительно ли ожидается, что он может быть nullable.

Если входные данные могут быть nullable, добавьте `null` или `undefined` к их типу, чтобы указать это.

```typescript
import { Component } from '@angular/core';

@Component({
  // Если `user` имеет значение nullish, `name` не будет вычислено, и выражение
  // вернет nullish-значение (`null` или `undefined`).
  template: `<div>{{ user?.name }}</div>`,
})
class MyComponent {
  user: { name: string } | null = { name: 'Angelino' };
}
```

Если входные данные не должны быть nullable, удалите оператор `?`.

```typescript
import { Component } from '@angular/core';

@Component({
  // Шаблон всегда отображает `name`, так как `user` гарантированно никогда не будет `null`
  // или `undefined`.
  template: `<div>{{ foo.bar }}</div>`,
})
class MyComponent {
  user: { name: string } = { name: 'Angelino' };
}
```

## Требования к конфигурации

Для работы любой расширенной диагностики необходимо включить [
`strictTemplates`](tools/cli/template-typecheck#strict-mode).
Также необходимо включить [`strictNullChecks`](tools/cli/template-typecheck#strict-null-checks), чтобы срабатывала
диагностика `optionalChainNotNullable`.

## Что делать, если этого нельзя избежать?

Эту диагностику можно отключить, отредактировав файл `tsconfig.json` проекта:

```json

{
  "angularCompilerOptions": {
    "extendedDiagnostics": {
      "checks": {
        "optionalChainNotNullable": "suppress"
      }
    }
  }
}
```

Дополнительную информацию см. в разделе [конфигурация расширенной диагностики](extended-diagnostics#configuration).
