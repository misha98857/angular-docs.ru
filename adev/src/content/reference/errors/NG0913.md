# Runtime Performance Warnings

### Изображения слишком большого размера (Oversized images)

При загрузке изображений **собственный (intrinsic) размер** загруженного файла сверяется с фактическим размером
изображения на странице. Фактический размер рассчитывается на основе **отрисованного размера** изображения с
примененными CSS-стилями, умноженного
на [коэффициент плотности пикселей устройства](https://web.dev/codelab-density-descriptors/#pixel-density). Если
загруженное изображение значительно больше (более чем на 1200px по любому из измерений), срабатывает это предупреждение.
Загрузка изображений слишком большого размера может замедлить загрузку страницы и негативно сказаться на
показателях [Core Web Vitals](https://web.dev/vitals/).

### Ленивая загрузка LCP-элемента (Lazy-loaded LCP element)

Самый крупный содержательный элемент на странице во время загрузки считается "LCP-элементом", что относится
к [Largest Contentful Paint (LCP)](https://web.dev/lcp/) — одному из показателей Core Web Vitals. Ленивая загрузка
LCP-элемента оказывает сильное негативное влияние на производительность страницы. При такой стратегии браузер должен
завершить вычисления макета, чтобы определить, находится ли элемент в области просмотра (viewport), прежде чем начать
загрузку изображения. В результате, когда Angular обнаруживает, что LCP-элементу был присвоен атрибут `loading="lazy"`,
срабатывает предупреждение.

@debugging
Используйте URL изображения, указанный в предупреждении консоли, чтобы найти соответствующий элемент `<img>`.

### Способы исправления изображений слишком большого размера

- Используйте исходное изображение меньшего размера.
- Добавьте [`srcset`](https://web.dev/learn/design/responsive-images/#responsive-images-with-srcset), если для разных
  макетов требуются разные размеры.
- Переключитесь на использование встроенной директивы изображений Angular ([
  `NgOptimizedImage`](https://angular.dev/api/common/NgOptimizedImage)), которая
  генерирует [srcset автоматически](https://angular.dev/guide/image-optimization#request-images-at-the-correct-size-with-automatic-srcset).

### Способы исправления ленивой загрузки LCP-элемента

- Измените атрибут `loading` на другое значение, например `"eager"`.
- Переключитесь на использование встроенной директивы изображений Angular ([
  `NgOptimizedImage`](https://angular.dev/api/common/NgOptimizedImage)), которая позволяет
  легко [приоритизировать LCP-изображения](https://angular.dev/guide/image-optimization#mark-images-as-priority).

### Отключение предупреждений о производительности изображений

Оба предупреждения можно отключить по отдельности для всего сайта, используя провайдер в корне вашего приложения:

```typescript
providers: [
  {
    provide: IMAGE_CONFIG,
    useValue: {
      disableImageSizeWarning: true,
      disableImageLazyLoadWarning: true
    }
  },
],
```
