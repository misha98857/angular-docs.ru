# Настройка сервера Angular CLI MCP

Angular CLI включает экспериментальный [сервер Model Context Protocol (MCP)](https://modelcontextprotocol.io/),
позволяющий ИИ-ассистентам в вашей среде разработки взаимодействовать с Angular CLI. Мы включили поддержку генерации
кода с помощью CLI, добавления пакетов и многое другое.

## Доступные инструменты

Сервер Angular CLI MCP предоставляет несколько инструментов для помощи в рабочем процессе разработки. По умолчанию
включены следующие инструменты:

| Имя                         | Описание                                                                                                                                                                                                                                        | `local-only` | `read-only` |
| :-------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------: | :---------: |
| `ai_tutor`                  | Запускает интерактивного ИИ-репетитора по Angular. Рекомендуется запускать в новом проекте Angular версии v20 или новее. [Подробнее](ai/ai-tutor).                                                                                              |      ✅      |     ✅      |
| `find_examples`             | Находит авторитетные примеры кода из курируемой базы данных официальных примеров и лучших практик, фокусируясь на **современных, новых и недавно обновленных** возможностях Angular.                                                            |      ✅      |     ✅      |
| `get_best_practices`        | Получает руководство по лучшим практикам Angular. Это руководство необходимо для обеспечения соответствия всего кода современным стандартам, включая standalone-компоненты, типизированные формы и современный поток управления (control flow). |      ✅      |     ✅      |
| `list_projects`             | Перечисляет имена всех приложений и библиотек, определенных в рабочей области Angular. Считывает конфигурационный файл `angular.json` для идентификации проектов.                                                                               |      ✅      |     ✅      |
| `onpush_zoneless_migration` | Анализирует код Angular и предоставляет пошаговый итеративный план миграции на стратегию обнаружения изменений `OnPush`, что является предварительным условием для приложения без зон (zoneless).                                               |      ✅      |     ✅      |
| `search_documentation`      | Выполняет поиск по официальной документации Angular на <https://angular.dev>. Этот инструмент следует использовать для ответа на любые вопросы об Angular, например, об API, учебных пособиях и лучших практиках.                               |      ❌      |     ✅      |

### Экспериментальные инструменты

Некоторые инструменты предоставляются в экспериментальном / предварительном статусе, так как они новые или не полностью
протестированы. Включайте их по отдельности с помощью опции [`--experimental-tool`](#command-options) и используйте с
осторожностью.

| Имя         | Описание                                                                                                                                                                                                   | `local-only` | `read-only` |
| :---------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------: | :---------: |
| `modernize` | Выполняет миграции кода и предоставляет дальнейшие инструкции по модернизации кода Angular для соответствия последним лучшим практикам и синтаксису. [Подробнее](https://angular.dev/reference/migrations) |      ✅      |     ❌      |

## Начало работы

Чтобы начать, выполните следующую команду в терминале:

```bash
ng mcp
```

При запуске из интерактивного терминала эта команда отображает инструкции по настройке хост-среды для использования
сервера MCP. В следующих разделах приведены примеры конфигураций для нескольких популярных редакторов и инструментов.

### Cursor

Создайте файл с именем `.cursor/mcp.json` в корне вашего проекта и добавьте следующую конфигурацию. Вы также можете
настроить его глобально в `~/.cursor/mcp.json`.

```json
{
  "mcpServers": {
    "angular-cli": {
      "command": "npx",
      "args": ["-y", "@angular/cli", "mcp"]
    }
  }
}
```

### Firebase Studio

Создайте файл с именем `.idx/mcp.json` в корне вашего проекта и добавьте следующую конфигурацию:

```json
{
  "mcpServers": {
    "angular-cli": {
      "command": "npx",
      "args": ["-y", "@angular/cli", "mcp"]
    }
  }
}
```

### Gemini CLI

Создайте файл с именем `.gemini/settings.json` в корне вашего проекта и добавьте следующую конфигурацию:

```json
{
  "mcpServers": {
    "angular-cli": {
      "command": "npx",
      "args": ["-y", "@angular/cli", "mcp"]
    }
  }
}
```

### JetBrains IDEs

В IDE от JetBrains (таких как IntelliJ IDEA или WebStorm), после установки плагина JetBrains AI Assistant, перейдите в
`Settings | Tools | AI Assistant | Model Context Protocol (MCP)`. Добавьте новый сервер (`+`) и выберите `As JSON`.
Затем вставьте следующую конфигурацию:

```json
{
  "mcpServers": {
    "angular-cli": {
      "command": "npx",
      "args": ["-y", "@angular/cli", "mcp"]
    }
  }
}
```

Для получения наиболее актуальных инструкций по настройке серверов MCP, пожалуйста, обратитесь к документации
JetBrains: [Подключение к серверу MCP](https://www.jetbrains.com/help/ai-assistant/mcp.html#connect-to-an-mcp-server).

### VS Code

В корне вашего проекта создайте файл с именем `.vscode/mcp.json` и добавьте следующую конфигурацию. Обратите внимание на
использование свойства `servers`.

```json
{
  "servers": {
    "angular-cli": {
      "command": "npx",
      "args": ["-y", "@angular/cli", "mcp"]
    }
  }
}
```

### Другие IDE

Для других IDE проверьте документацию вашей среды разработки, чтобы узнать правильное расположение конфигурационного
файла MCP (часто `mcp.json`). Конфигурация должна содержать следующий фрагмент.

```json
{
  "mcpServers": {
    "angular-cli": {
      "command": "npx",
      "args": ["-y", "@angular/cli", "mcp"]
    }
  }
}
```

## Опции команды

Команду `mcp` можно настроить с помощью следующих опций, передаваемых в качестве аргументов в конфигурации MCP вашей
IDE:

| Опция                         | Тип       | Описание                                                                                                                                                      | По умолчанию |
| :---------------------------- | :-------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------ | :----------- |
| `--read-only`                 | `boolean` | Регистрирует только те инструменты, которые не вносят изменений в проект. Ваш редактор или агент кодирования все равно могут выполнять правки.                | `false`      |
| `--local-only`                | `boolean` | Регистрирует только те инструменты, которые не требуют подключения к интернету. Ваш редактор или агент кодирования все равно могут отправлять данные по сети. | `false`      |
| `--experimental-tool`<br>`-E` | `string`  | Включает [экспериментальный инструмент](#experimental-tools). Разделяйте несколько опций пробелами, например, `-E tool_a tool_b`.                             |              |

Например, чтобы запустить сервер в режиме только для чтения в VS Code, вы должны обновить ваш `mcp.json` следующим
образом:

```json
{
  "servers": {
    "angular-cli": {
      "command": "npx",
      "args": ["-y", "@angular/cli", "mcp", "--read-only"]
    }
  }
}
```

## Обратная связь и новые идеи

Команда Angular приветствует ваши отзывы о существующих возможностях MCP и любые идеи по новым инструментам или
функциям. Пожалуйста, поделитесь своими мыслями, открыв issue
в [репозитории angular/angular на GitHub](https://github.com/angular/angular/issues).
